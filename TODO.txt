----
REWORK from ENTest notes: 
 - later
     - track study mode usage
     - bug - backside is too wide sometimes.
     - ignore overly high missed words in study mode
     - fix printout to show kanji properly
     - regularization / error bounds
     - redo 2do
     - refactor kanji->question meaning->answer etc.
     - add yomi to the history page review
 - ignored 
     - the cur_pred stuff for now
     - culm_pct ... don't need for kanji
     - scaler (could add and set to 1 but meh.)

--------------------------
TODO
--------------------------
Curr:
    - History breakdown by levels (JLPT,N3) ... show missed kanji, and estimated stats (loading bar? 92/120)
    
Code:
    
Rework:
    
New Features:
    History
        - translate history page
        - hide graph on old history page (no points on graph), or say data deleted due to age, gen graph w/ no points?
        - more history pg stats
            - switch to percentiles (need to add bins to metadata)
            	- could even make into graphs (you are here)         
            ? time spent per question, total
            - max questions answered

        
Efficiency:

BUGS:
    ? occassional timeouts since changing procfile to preload
    - can go to tests that don't exist (empty tests)
    - some tests vanish (why?)
    - session mismatch
        - related to resetting the server while tests are active gives the wrong number? (check where/when the 'current ID' number is pulled from)
        - on duplicate ID found, check contents if matched, or skip that number and attempt save again
    
PR:
    - basic seo
    - New reddit thread
    - tweets, msg some teaching sites to see if they're interested

Major Extensions:
    - convert to android app    
    - prep for other card sets (ENG, J->E)

--------------------------
Low Priority
--------------------------

Code:
    - get rid of magic numbers, switch to config variables
    - shorten queries 'loads(current_app.config['SESSION_REDIS'].get('TestMaterial'),db.metadata,db.session)' -> lred('TestMaterial')? (more readable)

Tweaks:
    ? redo regularization
        ? change jump size penalty from regularization to just averaging
        ? make steepness penalties exponential not logarithmic (loss should explode)
        ? switch to a slightly better ML algorithm (model family) allowing assymetries (non-sigmoid?)
    ? switch away from using params? ... would stop refresh bugs

New Features:
    - error screen (DB down, other) - contact info, apologies, redirect
    ? links to other tests with same IP. Use a cookie?
    ? add a 'drills' feature for kanji missed on a test
    - extend hist pg kanji suggestions - tooltips, categories
    - track user devices in testlog
    ? about section (other than the github)
            
Efficiency:
    ? get rid of question log ids
    ? clientside the math
    - trim the req list further?
    ? lower # of calls to redis where viable (looks like redis stores it on the same box so little point)
    - rebuffer tests when opened in history to redis - save lots of sql calls (only bother if needed) - could also just up the linger time in redis - needs a new timestamp for 'old' tests (on creation?)
    
Bugs:
    - it is possible atm for logs to overrun the 10k limit (buffer from log cleanups at 7500)
    ? deleting a session manually doesn't seem to actually delete it... sessions may be persistent in multiple locations
    Bad Predictions (start to Feb 2021)
        CLIFF (t>2- ie. 63005
        	- 7/4600
        	- typically over 50 questions
        TOO SHALLOW (0<t<.0002) - ie. 62627
        	- 19/4600
        	- avg questions ~30
        	- half are intentional/users fucking around?
        	- none recent
        FLAT (t=0) - ie. 63030
        	- 42/4600
        	- avg questions ~30
        	- possibly fixed
    	    - crazy prediction bug from minimize fn leading to /0 error ... re. images
            - probably needs a gradient when t <= 0 rather than a wall. Causes differentiability issues
            - https://www.reddit.com/r/LearnJapanese/comments/eq380w/made_an_app_that_tests_your_kanji_level_in_30/fes4muo/

PR:
    ? medium blog post about it ... or just stuff into the github. Or add an about section?